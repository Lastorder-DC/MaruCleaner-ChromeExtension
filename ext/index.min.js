var dom={src:[],img:[],addSrc:function(a){this.src.push(a)},addImg:function(a){this.img.push(a)}};document.onreadystatechange=function(a){if("interactive"==document.readyState)for(document.removeEventListener("DOMContentLoaded",onload),document.removeEventListener("DOMContentLoaded",onloadstart),window.removeEventListener("DOMContentLoaded",onload),i=0;i<a.srcElement.all.length;i++){var n=a.srcElement.all[i];"script"==n.localName?dom.addSrc(n):"img"==n.localName&&dom.addImg(n)}},now={now:location.pathname.split("/"),back:0,backCss:"",next:0,nextCss:""},view={now:1},last={},chrome.storage.sync.get("data",function(a){return console.log(a),data={on:1,list:[]},data=a,void 0==data.list&&(data.list=[]),void 0==data.on&&(data.on=1),1!=data.on?!1:($("head").remove(),console.log(data.on),void $(document).ready(function(){function a(){$("div.view-header").removeClass("hide")}function n(){$("div.view-header").addClass("hide")}arr=[],season=[],title=$("div.article-title").attr("title"),name=$("span.title-subject").html(),$.each($("img.lz-lazyload"),function(a,n){arr.push(n.attributes[2].value),cname=n.className}),isBreak=!1,$.each($("select.list-articles > option"),function(a,n){return season.forEach(function(a){a[1]==$(n).val()&&(isBreak=!0)}),isBreak?(isBreak=!1,!1):(s=$(n).html().replace(/([\s|\n|\t|\r])+/gi,""),season.push([$(n).html().replace(/	/g,""),$(n).val()]),void($(n).val()==now.now[2]&&(now.back=a)))}),last.name=name,last.title=title,last.link=now.now[2],changeNo=-1,$.each(data.list,function(a,n){n.name==last.name&&(changeNo=a)}),0==data.list.length?data.list[0]=last:-1==changeNo?data.list[data.list.length]=last:data.list[changeNo]=last,save=$.extend({},data),chrome.storage.sync.set(save,function(){console.log(save)}),void 0!==season[now.back-1]?(now.backCss="btn",now.backLink=season[now.back-1][1]):now.backCss="btn-lock",void 0!==season[now.back+1]?(now.next=now.back+1,now.nextCss="btn",now.nextLink=season[now.back+1][1]):now.nextCss="btn-lock",$("body").empty(),$("body").append("<div class='view-header'><div class='title'>header</div></div>"),$("div.view-header").prepend(0==now.back?"<div class='left "+now.backCss+"'>이전화</div>":"<a href='"+now.backLink+"'><div class='left "+now.backCss+"'>이전화</div></a>"),$("div.view-header").append(0==now.next?"<div class='right "+now.nextCss+"'>다음화</div>":"<a href='"+now.nextLink+"'><div class='right "+now.nextCss+"'>다음화</div></a>"),$("body").append("<div class='view-page'><span class='now'>"+view.now+"</span>/"+(arr.length-1)+"</span></div>"),$("div.title").html(title),$.each(arr,function(a,n){$("body").append("<img src='"+n+"' class='"+cname+" view' count='"+a+"'>")}),$(function(){var e=0;$(window).scroll(function(){var t=$(this).scrollTop();t>e?(now=$(document).scrollTop()+$(window).height(),max=$(document).height(),now==max?a():n()):a(),$.each($("img.view"),function(a,n){return $(n).offset().top-$(window).height()/3>$(window).scrollTop()?($("span.now").html($(n).attr("count")),!1):void 0}),e=t})})}))});